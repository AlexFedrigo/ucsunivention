Autor: Robson Vaamonde
Procedimentos em TI: http://procedimentosemti.com.br
Bora para Prática: http://boraparapratica.com.br
Robson Vaamonde: http://vaamonde.com.br
Facebook Procedimentos em TI: https://www.facebook.com/ProcedimentosEmTi
Facebook Bora para Prática: https://www.facebook.com/BoraParaPratica
Instagram Procedimentos em TI: https://www.instagram.com/procedimentoem
YouTUBE Bora Para Prática: https://www.youtube.com/boraparapratica
LinkedIn Robson Vaamonde: https://www.linkedin.com/in/robson-vaamonde-0b029028/
Data de criação: 20/07/2021
Data de atualização: 22/07/2021
Versão: 0.03
Testado e homologado no UCS Univention Core Free 5.0.x

Atualização do UCS: https://docs.software-univention.de/quickstart-en-5.0.html
Manual do UCS: https://docs.software-univention.de/manual-5.0.html
Active Directory UCS: https://www.univention.com/products/ucs/functions/services-windows-samba/
Active Directory Compatible: https://www.univention.com/products/univention-app-center/app-catalog/samba4/
Release Notes UCS 5.0: https://docs.software-univention.de/release-notes-5.0-0-en.html
Domain Join Assistant: https://www.univention.com/blog-en/2020/08/connecting-ubuntu-clients-to-ucs-domains-new-version-univention-domain-join-assistant/
Univention Domain Join Assistant: https://www.univention.com/products/ucs/functions/univention-domain-join-assistant/
Github Univention Domain Join: https://github.com/univention/univention-domain-join

Soluções para Ingressar Máquinas GNU/Linux no Domínio do UCS ou Microsoft Windows Server
01_ System Security Services Daemon: https://sssd.io/
02_ Manage enrollment in realms: https://www.systutorials.com/docs/linux/man/8-realm/
03_ Linux PAM (Pluggable Authentication Modules for Linux): http://www.linux-pam.org/

OBSERVAÇÃO IMPORTANTE: O repositório do Univention Domain Join suporta somente as versões da
distribuição: Ubuntu (versões: 14.04.x LTS, 16.04.x LTS, 18.04.x LTS e 20.04.x LTS), como o
Linux Mint é baseado na distribuição Ubuntu ele suporta as versões: 17.x, 18.x, 19.x e 20.x.
Ele foi projetado para funcionar somente em Distribuições que possui Ambiente Gráfico, em
servidores é necessário fazer o procedimento manualmente utilizando o PAM, Kerberos, SSSD, etc.

Primeira etapa: Verificando as Informações do Hostname e Endereço IPv4
	Terminal
		hostnamectl
		hostname -A
		cat /etc/hostname
		cat /etc/hosts
		ifconfig
		route -n
		systemd-resolve --status
		cat /etc/netplan/00-installer-config.yaml
		nslookup pti.intra
		ping pti.intra
		ping google.com
		timedatectl
		date

Segunda etapa: Atualizando o Sistema antes de Ingressar no Domínio do UCS
	Terminal
		sudo apt update
		sudo apt upgrade
		sudo apt autoremove
		sudo apt autoclean
		sudo apt clean

Terceira etapa: Instalando os Pacotes necessários para Ingressar no Domínio do UCS
	Terminal
		sudo apt update
		sudo apt -y install realmd libnss-sss libpam-sss sssd sssd-tools adcli \
		samba-common-bin oddjob oddjob-mkhomedir packagekit

Quarta etapa: Localizando o Domínio do UCS
	Terminal
		sudo realm discover pti.intra

Quinta etapa: Ingressando o Ubuntu Server no Domínio do UCS
	Terminal
		sudo realm join -U Administrator pti.intra
			Password for Administrator: pti@2018
		sudo realm list
		sudo id administrator@pti.intra 

Sexta etapa: Editando os arquivos de configurações do PAM, SSSD e Sudoers
	Terminal
		sudo pam-auth-update --enable mkhomedir
		sudo vim /etc/sssd/sssd.conf
			use_fully_qualified_names = False
		sudo systemctl restart sssd.services
		sudo usermod -aG sudo administrator@pti.intra
		sudo -i
			vim /etc/sudoers.d/ptiintra
				user ALL=(ALL) ALL
				administrator ALL=(ALL) ALL
		